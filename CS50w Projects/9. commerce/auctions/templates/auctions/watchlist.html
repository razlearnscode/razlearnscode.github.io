{% extends "auctions/layout.html" %} 

{% block body %}

<div class="active-listings">
  <div class="container">
    <h1 class="page-title">Your Watchlist</h1>

    <div class="listings-grid">
      {% for watchlist in all_watchlist_request %}
      <div class="listing-card">
        <img
          src="{{ watchlist.listing.imageURL }}"
          alt="{{ watchlist.listing.title }}"
          class="listing-image"
        />
        <div class="listing-info">
          <h2 class="listing-title">{{ watchlist.listing.title }}</h2>
          <p class="listing-description">{{ watchlist.listing.description }}</p>

          {% if listing.highest_bid %}
          <p class="listing-bid">
            <strong>Current Highest Bid:</strong> ${{ watchlist.listing.highest_bid }}
          </p>
          {% else %}
          <p class="listing-bid">
            <strong>Current Highest Bid:</strong> No bids yet
          </p>
          {% endif %}

          <a href="{% url 'listing_page' watchlist.listing.id %}" class="btn btn-primary"
            >View Details</a
          >
        </div>
      </div>
      {% empty %}
      <p>Add listing to your watchlist to display here</p>
      {% endfor %}
    </div>
  </div>
</div>

{% endblock %}
